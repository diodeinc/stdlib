"""Test for Spice model of Resistor.

pcb sim generics/spice/test/test_LevelShifter.zen \
    --setup generics/spice/test/test_LevelShifter.spice \
    -o - | ngspice
"""

load("../../../amplifiers.zen", "inverting_sum")
load("../../../interfaces.zen", "Ground", "Opamp", "Power")

OperationalAmplifier = Module("../../OperationalAmplifier.zen")
Resistor = Module("../../Resistor.zen")

VP = Power("VP")
VN = Power("VN")
INPUT_SIGNAL = Net("INPUT_1")
INPUT_OFFSET = Net("INPUT_2")
PROBE = Net("PROBE")
GND = Ground()
VOFFSET = Net("VOFFSET")

OPA1 = inverting_sum(
    name = "OPAMP",
    GND = GND,
    INPUTS = [INPUT_SIGNAL, INPUT_OFFSET],
    OUT = PROBE,
    gain = 1.0,
)

OperationalAmplifier(
    name = "BUFFER",
    VP = VP,
    VN = VN,
    OPA1 = OPA1,
)

# pcb:sch BUFFER.R x=-204.2000 y=227.6000 rot=0
# pcb:sch OPAMP_RA.R x=-87.3600 y=443.5000 rot=270
# pcb:sch OPAMP_RB.R x=-239.7600 y=494.3000 rot=0
# pcb:sch OPAMP_RI0.R x=-392.1600 y=240.3000 rot=270
# pcb:sch OPAMP_RI1.R x=-392.1600 y=316.5000 rot=270
# pcb:sch GND.1 x=-242.3000 y=583.2000 rot=0
# pcb:sch VN_VCC.1 x=-161.0200 y=367.3000 rot=180
# pcb:sch VP_VCC.1 x=-161.0200 y=202.2000 rot=0
